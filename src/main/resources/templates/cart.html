<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Pustok - Book Store HTML Template</title>
    <th:block th:include="layout/head"/>
    <style>
        .product-card .product-header .author,
        .product-card .product-header h3 {
            white-space: nowrap;
        }
    </style>
</head>

<body>
<div class="site-wrapper" id="top">
    <div class="site-header header-2 mb--20 d-none d-lg-block">
        <div class="header-middle pt--10 pb--10">
            <th:block th:include="layout/site-header/header-middle"/>
        </div>
        <div class="header-bottom bg-primary">
            <th:block th:include="layout/site-header/header-bottom"/>
        </div>
    </div>
    <div class="site-mobile-menu">
        <header class="mobile-header d-block d-lg-none pt--10 pb-md--10">
            <div class="container">
                <div class="row align-items-sm-end align-items-center">
                    <div class="col-md-4 col-7">
                        <a href="/" class="site-brand">
                            <!--                            <img src="/assets/image/logo.png" alt="">-->
                            <img src="/assets/image/logoProject.png" alt="" width="100%" height="100%">
                        </a>
                    </div>
                    <div class="col-md-5 order-3 order-md-2">
                        <nav class="category-nav   ">
                            <div>
                                <a href="javascript:void(0)" class="category-trigger"><i
                                        class="fa fa-bars"></i>Browse
                                    categories</a>
                                <ul class="category-menu">

                                    <th:block  th:each= "item : ${categories}">
                                        <li class="cat-item has-children">
                                            <a th:href="@{/category/__${item.slug}__}" th:text="${item.name}"></a>
                                            <ul class="sub-menu">
                                                <th:block th:each = "group : ${categoryGroups}">
                                                    <th:block th:if = "${group.getCategory().getId() == item.getId()}">
                                                        <li><a th:href= "@{/categoryGroup/__${group.slug}__}" th:text="${group.name}"></a></li>
                                                    </th:block>
                                                </th:block>
                                            </ul>
                                        </li>
                                    </th:block>

                                </ul>
                            </div>
                        </nav>
                    </div>
                    <div class="col-md-3 col-5  order-md-3 text-right">
                        <div class="mobile-header-btns header-top-widget">
                            <ul class="header-links">
                                <li class="sin-link">
                                    <a href="cart.html" class="cart-link link-icon"><i class="ion-bag"></i></a>
                                </li>
                                <li class="sin-link">
                                    <a href="javascript:" class="link-icon hamburgur-icon off-canvas-btn"><i
                                            class="ion-navicon"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!--Off Canvas Navigation Start-->
        <aside class="off-canvas-wrapper">
            <div class="btn-close-off-canvas">
                <i class="ion-android-close"></i>
            </div>
            <div class="off-canvas-inner">
                <!-- search box start -->
                <div class="search-box offcanvas">
                    <form>
                        <input type="text" placeholder="Search Here">
                        <button class="search-btn"><i class="ion-ios-search-strong"></i></button>
                    </form>
                </div>
                <!-- search box end -->
                <!-- mobile menu start -->
                <div class="mobile-navigation">
                    <!-- mobile menu navigation start -->
                    <nav class="off-canvas-nav">
                        <ul class="mobile-menu main-mobile-menu">
                            <li class="menu-item-has-children">
                                <a href="#">Blog</a>
                                <ul class="sub-menu">
                                    <li class="menu-item-has-children">
                                        <a href="#">Blog Grid</a>
                                        <ul class="sub-menu">
                                            <li><a href="blog.html">Full Widh (Default)</a></li>
                                            <li><a href="blog-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="blog-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">Blog List</a>
                                        <ul class="sub-menu">
                                            <li><a href="blog-list.html">Full Widh (Default)</a></li>
                                            <li><a href="blog-list-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="blog-list-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">Blog Details</a>
                                        <ul class="sub-menu">
                                            <li><a href="blog-details.html">Image Format (Default)</a></li>
                                            <li><a href="blog-details-gallery.html">Gallery Format</a></li>
                                            <li><a href="blog-details-audio.html">Audio Format</a></li>
                                            <li><a href="blog-details-video.html">Video Format</a></li>
                                            <li><a href="blog-details-left-sidebar.html">left Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <!--                                <a href=".section-margin">shop </a>-->
                                <a href="#">Shop</a>

                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Pages</a>
                                <ul class="sub-menu">
                                    <li><a href="cart.html">Cart</a></li>
                                    <li><a href="checkout.html">Checkout</a></li>
                                    <li><a href="compare.html">Compare</a></li>
                                    <li><a href="wishlist.html">Wishlist</a></li>

                                    <th:block th:if="!${username}">
                                        <li><a href="login-register.html">Login Register</a></li>
                                    </th:block>

                                    <th:block th:if="${username}">
                                        <li><a href="my-account.html">My Account</a></li>
                                    </th:block>

                                    <li><a href="order-complete.html">Order Complete</a></li>
                                    <li><a href="faq.html">Faq</a></li>
                                    <li><a href="contact-2.html">contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </nav>
                    <!-- mobile menu navigation end -->
                </div>
                <!-- mobile menu end -->
                <nav class="off-canvas-nav">

                </nav>
                <div class="off-canvas-bottom">
                    <div class="contact-list mb--10">
                        <a href="#" class="sin-contact"><i class="fas fa-mobile-alt"></i>(12345) 78790220</a>
                        <a href="#" class="sin-contact"><i class="fas fa-envelope"></i>examle@handart.com</a>
                    </div>
                    <div class="off-canvas-social">
                        <a href="#" class="single-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="single-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="single-icon"><i class="fas fa-rss"></i></a>
                        <a href="#" class="single-icon"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="single-icon"><i class="fab fa-google-plus-g"></i></a>
                        <a href="#" class="single-icon"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </aside>
        <!--Off Canvas Navigation End-->
    </div>
    <div class="sticky-init fixed-header common-sticky">
        <div class="container d-none d-lg-block">
            <div class="row align-items-center">
                <div class="col-lg-4">
                    <a href="/" class="site-brand">
                        <!--                        <img src="/assets/image/logo.png" alt="">-->
                        <img src="/assets/image/logoProject.png" alt="" width="100%" height="100%">
                    </a>
                </div>
                <div class="col-lg-8">
                    <div class="main-navigation flex-lg-right">
                        <ul class="main-menu menu-right ">
                            <li class="menu-item ">
                                <a href="/">Home
                                    <!--                                    <i-->
                                    <!--                                        class="fas fa-chevron-down dropdown-arrow"></i>-->
                                </a>
                            </li>
                            <!-- Shop -->
                            <li class="menu-item has-children mega-menu">
                                <a href="javascript:void(0)">Shop <i
                                        class="fas fa-chevron-down dropdown-arrow"></i></a>
                                <ul class="sub-menu four-column">
                                    <li class="cus-col-25">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Shop Grid </a></h3>
                                        <ul class="mega-single-block">
                                            <li><a href="shop-grid.html">Fullwidth</a></li>
                                            <li><a href="shop-grid-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="shop-grid-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="cus-col-25">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Shop List</a></h3>
                                        <ul class="mega-single-block">
                                            <li><a href="shop-list.html">Fullwidth</a></li>
                                            <li><a href="shop-list-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="shop-list-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="cus-col-25">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Product Details 1</a>
                                        </h3>
                                        <ul class="mega-single-block">
                                            <li><a href="product-details.html">Product Details Page</a></li>
                                            <li><a href="product-details-affiliate.html">Product Details
                                                Affiliate</a></li>
                                            <li><a href="product-details-group.html">Product Details Group</a></li>
                                            <li><a href="product-details-variable.html">Product Details
                                                Variables</a></li>
                                        </ul>
                                    </li>
                                    <li class="cus-col-25">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Product Details 2</a>
                                        </h3>
                                        <ul class="mega-single-block">
                                            <li><a href="product-details-left-thumbnail.html">left Thumbnail</a>
                                            </li>
                                            <li><a href="product-details-right-thumbnail.html">Right Thumbnail</a>
                                            </li>
                                            <li><a href="product-details-left-gallery.html">Left Gallery</a></li>
                                            <li><a href="product-details-right-gallery.html">Right Gallery</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <!-- Pages -->
                            <li class="menu-item has-children">
                                <a href="javascript:void(0)">Pages <i
                                        class="fas fa-chevron-down dropdown-arrow"></i></a>
                                <ul class="sub-menu">
                                    <li><a href="cart.html">Cart</a></li>
                                    <li><a href="checkout.html">Checkout</a></li>
                                    <li><a href="compare.html">Compare</a></li>
                                    <li><a href="wishlist.html">Wishlist</a></li>

                                    <th:block th:if="!${username}">
                                        <li><a href="login-register.html">Login Register</a></li>
                                    </th:block>

                                    <th:block th:if="${username}">
                                        <li><a href="my-account.html">My Account</a></li>
                                    </th:block>

                                    <li><a href="order-complete.html">Order Complete</a></li>
                                    <li><a href="faq.html">Faq</a></li>
                                    <li><a href="contact-2.html">contact 02</a></li>
                                </ul>
                            </li>
                            <!-- Blog -->
                            <li class="menu-item has-children mega-menu">
                                <a href="javascript:void(0)">Blog <i
                                        class="fas fa-chevron-down dropdown-arrow"></i></a>
                                <ul class="sub-menu three-column">
                                    <li class="cus-col-33">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Blog Grid</a></h3>
                                        <ul class="mega-single-block">
                                            <li><a href="blog.html">Full Widh (Default)</a></li>
                                            <li><a href="blog-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="blog-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="cus-col-33">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Blog List </a></h3>
                                        <ul class="mega-single-block">
                                            <!-- <li><a href="blog-list.html">Full Widh (Default)</a></li> -->
                                            <li><a href="blog-list-left-sidebar.html">left Sidebar</a></li>
                                            <li><a href="blog-list-right-sidebar.html">Right Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li class="cus-col-33">
                                        <h3 class="menu-title"><a href="javascript:void(0)">Blog Details</a></h3>
                                        <ul class="mega-single-block">
                                            <li><a href="blog-details.html">Image Format (Default)</a></li>
                                            <li><a href="blog-details-gallery.html">Gallery Format</a></li>
                                            <li><a href="blog-details-audio.html">Audio Format</a></li>
                                            <li><a href="blog-details-video.html">Video Format</a></li>
                                            <li><a href="blog-details-left-sidebar.html">left Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item">
                                <a href="contact.html">Contact</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <section class="breadcrumb-section">
        <h2 class="sr-only">Site Breadcrumb</h2>
        <div class="container">
            <div class="breadcrumb-contents">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item active">Cart</li>
                    </ol>
                </nav>
            </div>
        </div>
    </section>
    <!-- Cart Page Start -->
    <main class="cart-page-main-block inner-page-sec-padding-bottom">
        <div class="cart_area cart-area-padding  ">
            <div class="container">
                <div class="page-section-title">
                    <h1>Shopping Cart</h1>
                </div>
                <div class="row">
                    <div class="col-12">
                        <form action="#" class="" id="cart-info" th:data-id="${cart.getId()}">
                            <!-- Cart Table -->
                            <div class="cart-table table-responsive mb--40">
                                <table class="table">
                                    <!-- Head Row -->
                                    <thead>
                                    <tr>
                                        <th class="pro-thumbnail">Image</th>
                                        <th class="pro-title">Product</th>
                                        <th class="pro-price">Price</th>
                                        <th class="pro-quantity">Quantity</th>
                                        <th class="pro-subtotal">Total</th>
                                        <th class="pro-remove"></th>
                                    </tr>
                                    </thead>
                                    <tbody id="showListCartDetails">
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="cart-section-2">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-12 mb--30 mb-lg--0">
                        <!-- slide Block 5 / Normal Slider -->
                        <div class="cart-block-title">
                            <h2>YOU MAY BE INTERESTED INâ€¦</h2>
                        </div>
                        <div class="product-slider sb-slick-slider" data-slick-setting='{
							          "autoplay": true,
							          "autoplaySpeed": 8000,
							          "slidesToShow": 2
									  }' data-slick-responsive='[
                {"breakpoint":992, "settings": {"slidesToShow": 2} },
                {"breakpoint":768, "settings": {"slidesToShow": 3} },
                {"breakpoint":575, "settings": {"slidesToShow": 2} },
                {"breakpoint":480, "settings": {"slidesToShow": 1} },
                {"breakpoint":320, "settings": {"slidesToShow": 1} }
            ]'>
                            <th:block th:each = "item : ${NewArrivals}">
                                <div class="single-slide">
                                    <div class="product-card">
                                        <div class="product-header">
                                            <a class="author" th:text="${item.author}"></a>
                                            <h3><a th:href="@{/product-details/__${item.slug}__}" th:text="${item.name}"></a></h3>
                                        </div>
                                        <div class="product-card--body">
                                            <div class="card-image">
                                                <img th:src="${item.avatar}" width="100%" height="242px" style="margin: 0px 5px">
                                                <div class="hover-contents">
                                                    <div class="hover-btns">
                                                        <a href="cart.html" class="single-btn">
                                                            <i class="fas fa-shopping-basket"></i>
                                                        </a>
                                                        <a href="#" data-toggle="modal" data-target="#quickModal" th:data-id ="${item.id}"
                                                           class="single-btn showProductDetails">
                                                            <i class="fas fa-eye"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="price-block">
                                                <th:block th:if = "${item.percentageDiscount == 0}">
                                                    <span class="price" th:text="${item.price}"></span>
                                                </th:block>
                                                <th:block th:if = "${item.percentageDiscount != 0}">
                                                    <span class="price" th:text="${item.lastPrice}"></span>
                                                    <del class="price-old" th:text="${item.price}"></del>
                                                    <span class="price-discount" th:text="${item.percentageDiscount + '%'}"></span>
                                                </th:block>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </th:block>
                        </div>
                    </div>
                    <!-- Cart Summary -->
                    <div class="col-lg-6 col-12 d-flex">
                        <div class="cart-summary">
                            <div class="cart-summary-wrap">
                                <h4><span>Cart Summary</span></h4>
                                <p>Sub Total <span class="text-primary" id="sum-total"></span></p>
                                <p>Shipping Cost <span class="text-primary"></span></p>
                                <h2>Grand Total <span class="text-primary" id="sum-total-after"></span></h2>
                            </div>
                            <div class="cart-summary-button">
                                <a href="checkout.html" class="checkout-btn c-btn btn--primary">Checkout</a>
                                <button class="update-btn c-btn btn-outlined">Update Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Cart Page End -->
</div>
<!--=================================
Brands Slider
===================================== -->
<section class="section-margin">
    <th:block th:include="layout/brand-slider"/>
</section>
<!--=================================
Footer Area
===================================== -->
<th:block th:include="layout/footer"/>

<th:block th:include="layout/script"/>

<script src="/assets/js/app.js"></script>
<script src="/assets/js/sweetalert2.min.js"></script>
<script src="/assets/js/notify-0.4.1.min.js"></script>
<script>
    class CartDetail {
        constructor(id, productImage, productName, productLastPrice, quantity, subTotal) {
            this.id = id;
            this.productImage = productImage;
            this.productName = productName;
            this.productLastPrice = productLastPrice;
            this.quantity = quantity;
            this.subTotal = subTotal;
        }
    }

    let arrayCartDetail = new Array();
    let arrCartDetailUpdate = new Array();

    function showCartDetail(cartDetail) {
        return `  <tr id="cart_detai_${cartDetail.id}" data-id="${cartDetail.id}">
                                        </td>
                                        <td class="pro-thumbnail"><a href="#"><img
                                                src="${cartDetail.productImage}" alt="Product"></a></td>
                                        <td class="pro-title"><a href="#">${cartDetail.productName}</a></td>
                                        <td class="pro-price"><span id="product-price-${cartDetail.id}">${cartDetail.productLastPrice}</span></td>
                                        <td class="pro-quantity">
                                            <div class="pro-qty">
                                                <div class="count-input-block">
                                                    <input type="hidden" id="quantity-product-old-${cartDetail.id}" value="${cartDetail.quantity}">
                                                    <input type="number" class="form-control text-center"
                                                        id="quantity-product-${cartDetail.id}"   value="${cartDetail.quantity}" onkeyup="onChange(${cartDetail.id})">


                                                </div>
                                            </div>
                                        </td>
                                        <td class="pro-subtotal"><span id="sub-total-${cartDetail.id}">${cartDetail.subTotal}</span></td>
                                        <td class="pro-remove"><a  class="pro-remove-cart" href="javascript:void(0)" data-id="${cartDetail.id}" ><i class="far fa-trash-alt"></i></a>
                                    </tr>`
    }

    let str_footer = `  <tr>
                                        <td colspan="6" class="actions">
                                            <div class="coupon-block">
                                                <div class="coupon-text">
                                                    <label for="coupon_code">Coupon:</label>
                                                    <input type="text" name="coupon_code" class="input-text"
                                                           id="coupon_code" value="" placeholder="Coupon code">
                                                </div>
                                                <div class="coupon-btn">
                                                    <input type="submit" class="btn btn-outlined"
                                                           name="apply_coupon" value="Apply coupon">
                                                </div>
                                            </div>
                                            <div class="update-block text-right">
                                                <input type="button" class="btn btn-outlined" name="update_cart" id="update-cart"
                                                       value="Update cart" disabled>
                                                <input type="hidden" id="_wpnonce" name="_wpnonce"
                                                       value="05741b501f">
                                                <input type="hidden" name="_wp_http_referer"
                                                        value="/petmark/cart/">
                                            </div>
                                        </td>
                                    </tr>`

    function showCart() {
        let id_cart = $("#cart-info").data("id");
        console.log(id_cart);
        arrayCartDetail = new Array();
        $.ajax({
            type: "GET",
            url: "/cp/api/cart-detail/cart/" + id_cart,
        }).done((cdList) => {
            let str = "";
            let sumTotal = 0;
            console.log(cdList)
            for (let i = 0; i < cdList.length; i++) {
                let total = cdList[i].quantity * cdList[i].productLastPrice;
                let cartDetail = new CartDetail(cdList[i].id, cdList[i].productImage, cdList[i].productName, cdList[i].productLastPrice, cdList[i].quantity, total)
                str += showCartDetail(cartDetail);
                sumTotal += cartDetail.subTotal;

                let cartDT = {
                    id: cdList[i].id,
                    quantity: cdList[i].quantity
                }
                arrayCartDetail.push(cartDT)
            }
            str += str_footer;
            $("#showListCartDetails").html(str);
            $("#sum-total").html(sumTotal);
            $("#sum-total-after").html(sumTotal); /// co the nhan voi ship

            removeCartDetail();
            updateCart();
        }).fail(function () {
            $.notify("Something went wrong, please try again", "error");
        })
    }


    function removeCartDetail() {
        $(".pro-remove-cart").on("click", function () {

            let id_cartDT = $(this).data("id");
            arrayCartDetail = new Array();
            $.ajax({
                type: "GET",
                url: "/cp/api/cart-detail/remove/" + id_cartDT
            }).done(function (cdList) {
                let str = "";
                let sumTotal = 0;

                for (let i = 0; i < cdList.length; i++) {
                    let total = cdList[i].quantity * cdList[i].productLastPrice;
                    let cartDetail = new CartDetail(cdList[i].id, cdList[i].productImage, cdList[i].productName, cdList[i].productLastPrice, cdList[i].quantity, total)
                    str += showCartDetail(cartDetail);
                    sumTotal += cartDetail.subTotal;

                    let cartDT = {
                        id: cdList[i].id,
                        quantity: cdList[i].quantity
                    }
                    arrayCartDetail.push(cartDT)


                }
                str += str_footer;
                $("#showListCartDetails").html(str);
                $("#sum-total").html(sumTotal);
                $("#sum-total-after").html(sumTotal); /// co the nhan voi ship

                // $.notify("Product removed from cart successfully !", "success")
                App.showSuccessAlert("Product removed from cart successfully !")

                removeCartDetail();
                updateCart();
            }).fail(function () {
                $.notify("Something went wrong, please try again", "error");
            })
        })
    }


    function onChange(id) {
        let price = parseInt($("#product-price-" + id).text());

        let quantity = parseInt($("#quantity-product-" + id).val());

        let quantityOld = parseInt($("#quantity-product-old-" + id).val());

        console.log(arrayCartDetail)

        let ixdexCDT = -1;
        for (let i = 0; i < arrayCartDetail.length; i++) {
            if (arrayCartDetail[i].id == id) {
                ixdexCDT = i;
                break;
            }
        }

        console.log(ixdexCDT);
        let total = price * quantity;
        $("#sub-total-" + id).html(total)
        if (quantity != quantityOld) {
            $("#update-cart").prop("disabled", false)
            let newCartDT = {
                id: id,
                quantity: quantity
            }
            arrayCartDetail[ixdexCDT] = newCartDT;

        } else {
            $("#update-cart").prop("disabled", true)
        }

    }


    function updateCart() {
        $("#update-cart").on("click", function () {
            arrCartDetailUpdate = new Array();
            let quantityOld = 0;
            for (let i = 0; i < arrayCartDetail.length; i++) {
                quantityOld = parseInt($("#quantity-product-old-" + arrayCartDetail[i].id).val());
                if (arrayCartDetail[i].quantity != quantityOld) {
                    // arrCartDetailUpdate.push(arrayCartDetail[i])
                    let cartDT = {
                        id: arrayCartDetail[i].id,
                        quantity: arrayCartDetail[i].quantity
                    }
                    updateCartDetail(cartDT);
                }
            }

        })
    }

    function updateCartDetail(cartDetailsDTO) {
        console.log(cartDetailsDTO)
        $.ajax({
            type: "POST",
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            url: "/cp/api/cart-detail/update",
            data: JSON.stringify(cartDetailsDTO)
        }).done(function (resp) {
            $.notify("Update success !", "success");
            App.showSuccessAlert("Update successfully !")
            showCart();
        }).fail(function (jqXHR) {
            if (jqXHR.responseJSON) {
                if (jqXHR.responseJSON.message) {
                    $.notify(jqXHR.responseJSON.message, "error");
                } else {
                    $.each(jqXHR.responseJSON, function (key, value) {
                        $.notify(value, "error");
                    });
                }
            } else {
                $.notify("Something went wrong, please try again", "error");
            }
        })
    }

    showCart();
    removeCartDetail();
    updateCart();
</script>
</body>
</html>